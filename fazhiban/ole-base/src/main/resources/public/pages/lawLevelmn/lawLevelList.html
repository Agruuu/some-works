<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" media="screen" href="../../css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" media="screen" href="../../css/dataTables.bootstrap.min.css">
<link rel="stylesheet" type="text/css" media="screen" href="../../layui/css/layui.css">
<link rel="stylesheet" href="../../layui/css/layui_orhon_mn.css" media="all" />
<script src="http://ime.orhonit.org/orhonjsime2/js/orhonjsime.js"></script>
<link rel="stylesheet" type="text/css" href="http://ime.orhonit.org/orhonjsime2/css/style.css" />
<script type="text/javascript">
       orhonIMEinit = {
           element: "",
           ele_except: "",
           editor: {
               IME_Mount: true,
               tinymce: "",
               ueditor: "",
           },
           IME_cssurl: "",
           IME_theme: "",
           Output_Unicode: true,
       };
       Iframe_init = {
           iframes: "",
           ifr_except: "",
           element: "",
           ele_except: "",
       };
</script>

</head>
<body>
    <div>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
           <header class="pages_header">
               <div align="left">
                   <table style="width: 100%">
                       <tr>
                           <td>
                               <form class="form-inline" onsubmit="return false">
                                   <div class="form-group">
                                       	ᠦᠢᠯᠡᠳᠦᠯ ᠤᠨ ᠲᠡᠰ  ᠤᠨ ᠨᠡᠷᠡᠶᠢᠳᠦᠯ 
                                       <input id="name" type="text" class="form-control" placeholder="ᠦᠢᠯᠡᠳᠦᠯ ᠤᠨ ᠲᠡᠰ  ᠤᠨ ᠨᠡᠷᠡᠶᠢᠳᠦᠯ ">
                                       
                                   </div>
                                   <button id="searchBt" class="layui-btn layui-btn-small"><i class="layui-icon">&#xe615;</i>ᠬᠠᠶᠢᠬᠤ</button>
                               	<button class="layui-btn layui-btn-small" permission="sys:lawLevel:add" onclick="addUser();">
                                  <i class="layui-icon">&#xe608;</i> ᠨᠡᠮᠡᠬᠦ
                                </button>
                               </form>
                           </td>
                           <!--<td align="right">
                               
                           </td>-->
                       </tr> 
                   </table>
               </div>
           </header>
                
            <div class="list_mgl_right">
                <div class="widget-body no-padding">
                    <table id="dt-table" class="table table-striped table-bordered table-hover" style="width:100%">
                        <thead>
                            <tr>
                            </tr>                       
                            <tr class="list_mgl">   
                                <th><span>ᠦᠢᠯᠡᠳᠦᠯ ᠤᠨ ᠲᠡᠰ ᠤᠨ ᠨᠡᠷᠡᠶᠢᠳᠦᠯ </span></th>                               
                                <th><span>ᠳᠡᠭᠡᠳᠦ ᠱᠠᠲᠤᠨ ᠦ ᠨᠡᠷᠡᠶᠢᠳᠦᠯ</span> </th>
                                <th> <span>ᠠᠩᠭ᠍ᠯᠢ ᠨᠡᠷ᠎ᠡ</span></th>
                                <th><span>ᠡᠭᠦᠰᠭᠡᠨ ᠪᠠᠶᠢᠭᠤᠯᠤᠭᠴᠢ</span></th> 
                                <th><span>ᠪᠠᠶᠢᠭᠤᠯᠤᠭᠰᠠᠨ ᠬᠤᠭᠤᠴᠠᠭ᠎ᠠ</span></th> 
                                <th><span>ᠵᠢᠭᠰᠠᠭᠠᠯᠲᠠ</span></th>
                                <th><span>ᠡᠬᠢᠯᠡᠵᠦ ᠬᠡᠷᠡᠭᠯᠡᠬᠦ ᠡᠰᠡᠬᠦ</span></th>
                                <th><span>ᠠᠵᠢᠯᠯᠠᠬᠤ</span></th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>       
    </div>
</body>
</html>

<script type="text/javascript" src="../../js/libs/jquery-2.1.1.min.js"></script>
<script type="text/javascript" src="../../js/jq.js"></script>
<script type="text/javascript" src="../../js/plugin/datatables/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="../../js/plugin/datatables/dataTables.bootstrap.min.js"></script>
<script type="text/javascript" src="../../js/my/permission.js"></script>
<script type="text/javascript" src="../../layui/layui.all.js"></script>

<script type="text/javascript">
var pers = checkPermission();

var example;

function addUser(){
 layer.open({
            type: 2,
            title: 'ᠬᠠᠤᠯᠢ ᠴᠠᠭᠠᠵᠠ ᠶᠢᠨ ᠵᠡᠷᠭᠡ ᠳᠡᠰ ᠢ ᠨᠡᠮᠡᠬᠦ ',
            shade: [0],
            area: ['50%', '50%'],
            shift: 2,
            content: 'addLawLevel.html' //iframe的url，no代表不显示滚动条
        });
}

function update(id){
 layer.open({
            type: 2,
            title: 'ᠬᠠᠤᠯᠢ ᠴᠠᠭᠠᠵᠠ ᠶᠢᠨ ᠵᠡᠷᠭᠡ ᠳᠡᠰ ᠢ ᠵᠠᠰᠠᠪᠤᠷᠢᠯᠠᠬᠤ',
            shade: [0],
            area: ['50%', '50%'],
            shift: 2,
            content: "updateLawLevel.html?id=" + id
        });
}

function del(id){
    layer.confirm('ᠤᠰᠠᠳᠬᠠᠨ᠎ᠠ ᠤᠤ ', {title:'ᠵᠠᠩᠭᠢ ',btn : [ 'ᠵᠠ', 'ᠦᠬᠡᠢᠢᠰᠬᠡᠬᠦ' ]
    }, function() {
        $.ajax({
            type : 'delete',
            url : '/base/LawLevel/'+id,
            success : function(data) {
                example.ajax.reload();
                layer.msg("ᠤᠰᠠᠳᠬᠠᠪᠠ");
            }
        });
        
        layer.close(1);
    });
}

function init(){
    var i = 0;
    example = 
        $('#dt-table').DataTable({
            /* "language":lang,  //提示信息 */
            "language":lang_mg,
            "searching": false,
            "processing": false,
            "serverSide" : true,
            "bLengthChange": false,
            /* "oLanguage": lang,//表格分页汉化 */
            "ajax": {
                "url" : "/base/LawLevel/list",
                "type":"get",
                "data":function(d){
                	console.log(d);
                    d.name = $('#name').val();
                }
            },
            "columns": [
                { "data": "mglName", "defaultContent": ""},
                { "data": "mglPanrentName", "defaultContent": ""},
                { "data": "nameEn", "defaultContent": ""},
                { "data": "mglCreateName", "defaultContent": ""}, 
                { "data": "mglCreateDate", "defaultContent": ""},
                { "data": "sort", "defaultContent": ""},
                { "data": "mglIsEffect", "defaultContent": ""},
                { "data": "", "defaultContent": ""},
            ],
            "columnDefs": [  
                //{ "name": "mglName", "targets": 0 },
                {
					"targets": 0,
					"render": function (data, type, row) {
                		var mglName = row['mglName'];
                		if(mglName != null){
                			return "<span id='mn_establish'>"+mglName+"</span>";
                		}else{
                			mglName = "";
                		}
                     }
				},
                //{ "name": "mglPanrentName", "targets": 1 },
                {
					"targets": 1,
					"render": function (data, type, row) {
                		var mglPanrentName = row['mglPanrentName'];
                		if(mglPanrentName != null){
                			return "<span id='mn_establish'>"+mglPanrentName+"</span>";
                		}else{
                			mglPanrentName = "";
                		}
                     }
				},
                { "name": "nameEn", "targets": 2 },
                { "name": "createName", "targets": 3 }, 
                //{ "name": "createDate", "targets": 4 },
                {
					"targets": 4,
					"render": function (data, type, row) {
                		var createDate = row['createDate'];
                		if(createDate != null){
                			return "<span id='mn_establish'>"+createDate+"</span>";
                		}else{
                			createDate = "";
                		}
                     }
				},
                { "data": "sort", "targets": 5 },
                //{ "data": "mglIsEffect", "targets": 6 },
                {
					"targets": 6,
					"render": function (data, type, row) {
                		var mglIsEffect = row['mglIsEffect'];
                		if(mglIsEffect != null){
                			return "<span id='mn_establish'>"+mglIsEffect+"</span>";
                		}else{
                			mglIsEffect = "";
                		}
                     }
				},
                { 
                    "targets": 7,
                    "render": function (data, type, row) {
                        var id = row['id'];
//                        var btn = $("<button class='layui-btn layui-btn-mini' title='编辑' onclick='update(\""
//                                + id + "\")'><i class='layui-icon'>&#xe642;</i></button>");
                        var edit = buttonEdit(id, "sys:lawLevel:update", pers);
//                        var btn1 = $("<button class='layui-btn layui-btn-mini layui-btn-danger' title='删除' onclick='del(\""
//                                + id + "\")'><i class='layui-icon'>&#xe640;</i></button>")
                        var	del = buttonDel(id, "sys:lawLevel:del", pers);
                        return edit+del;
                  }
                }
              ],
            "order": [[ 6, "desc" ]]
        } );
}

$("#searchBt").click(function(){
    example.ajax.reload();
});

init();
</script>
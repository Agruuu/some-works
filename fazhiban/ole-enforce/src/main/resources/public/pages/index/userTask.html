<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title></title>
<link rel="stylesheet"  href="/enforce/layui/css/layui.css" media="all" />
<link rel="stylesheet"  href="/enforce/layui/css/global.css" media="all" />
<link rel="stylesheet"  type="text/css"  media="screen"   href="../../css/bootstrap.min.css">
<link rel="stylesheet"  href="../../css/AdminLTE.min.css">
	<link rel="stylesheet" href="../../css/font-awesome/css/font-awesome.min.css">

<style>
.wrap{ width:auto; max-width:320px; margin:0 auto;}
.fenye{ float:left; margin-top:10px;}
.fenye ul{ float:left; margin-left:32px; }
.fenye ul li{ float:left; margin-left:5px;padding: 4px 6px; border:1px solid #ccc;  font-weight:bold; cursor:pointer; color:#999;}
.fenye ul li a{ color:#999;}
.fenye ul li.xifenye{ width:60px; text-align:center; float:left; position:relative;cursor: pointer;}
.fenye ul li .xab{ float:left; position:absolute; width:39px; border:1px solid #ccc; height:123px; overflow-y: auto;overflow-x: hidden;top:-125px; background-color: #fff; display:inline;left:-1px; width:50px;}
.fenye ul li .xab ul{ margin-left:0; padding-bottom:0;}
.fenye ul li .xab ul li{ border:0; padding:4px 0px; color:#999; width:34px; margin-left:0px; text-align:center;}
	.row{
		margin: 0 auto;
	}
	.row{
	}
	.content-text{
		background: #ffffff;
		box-shadow: 0px 0px 25px #cccccc;
		min-height: 50px;
		height: calc( 100% - 300px );
		width: 100%;
		border-radius: 5px;
	}
	.content-title{
		font-size: 16px;
		line-height: 20px;
		color: #5b5b5b;
		margin: 0px 10px 0px 10px;
		padding:10px 0px;
		border-bottom: 1px solid #cccccc;
	}
    .content-case{
        width: 100%;
		overflow:scroll; 
        overflow-x: hidden ; 
        overflow-y:hidden ;
        height:200px !important;
    }
	.caselist{
		padding:10px 0px;
		font-size: 14px;
		border-bottom: 1px solid #cccccc;
	}
	.casetitle{
		margin-bottom: 5px;
		color: #858080;
	}
	.casestatus{
		font-size: 11px;
		line-height: 20px;
		text-align: center;
		border-radius: 50px;
		background: #5b8bff;
		color: #ffffff;
	}
	.caselist img{
		width: 9px;
	}
	.earlytitle{
		white-space: nowrap;
		font-size: 14px;
		margin-bottom: 5px;
		overflow: hidden;
		color: #858080;
		text-overflow: ellipsis;
	}
	.casedate{
		font-size: 12px;
		color: #858080;

	}
.earlyname{
	color: #858080;
}
	.earlypname{
		text-align: right;
		color: #858080;
	}
	.layui-layer-title{color:#fff !important;background-color: #5b8bff;}
	.layui-layer-content{
	top:0 !important;
	 
	}
	.test{ line-height: 1.3 ！import;}
</style>
</head>
<body>
	<div class="row">
		<div class="col-md-12">
			<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3">
				<div style="background:#f4843d;box-shadow: 0px -4px 18px #f4843d;line-height:102px;height: 102px;width: 100%;border-radius: 5px;">
					<div class="caseup-title" style="font-size: 16px;color:#fff;">
					
						<img src="../../images/pagecase1.png" style="margin-left: 20px;margin-right: 15px;">
						<span style="margin-right: 10px;">案件上报</span>
						<span style="margin-right: 20px;font-size: 24px;"  id="ajsbsl"></span>
					</div>
				</div>
			</div>
			
			<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3">
				<div style="background:#48be5a;box-shadow: 0px -4px 18px #48be5a;line-height:102px;height: 102px;width: 100%;border-radius: 5px;overflow: hidden;">		
					<div class="caseup-title "  id="richangjiancha" style="font-size: 16px;color:#fff;">
						<!-- <a href="http://localhost:8081/enforce/pages/checkDaily/search/searchCheckDaily.html" class="layui-btn" style="line-height:102px;height: 102px;background-color:#48be5a;width:100%;padding:0;text-align:left;"> -->
						<img src="../../images/pagecase2.png" style="margin-left: 20px;margin-right: 15px;">
						<span style="margin-right: 10px;">日常检查</span>
						<span style="margin-right: 20px;font-size: 24px;" id="rcjcsl"></span>
						<!-- </a> -->
					</div>
				</div>	
			</div>
		
			<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3">
				<div style="background:#e96054;box-shadow: 0px -4px 18px #e96054;line-height:102px;height: 102px;width: 100%;border-radius: 5px;overflow: hidden;">
					<div class="caseup-title"  id="zhuanxiangjiancha" style="font-size: 16px;color:#fff;">
					<!-- <a href="http://localhost:8081/enforce/pages/special/checkQuery.html" class="layui-btn" style="line-height:102px;height: 102px;background-color:#e96054;width:100%;padding:0;text-align:left;"> -->
						<img src="../../images/pagecase3.png" style="margin-left: 20px;margin-right: 15px;">
						<span style="margin-right: 10px;">专项检查</span>
						<span style="margin-right: 20px;font-size: 24px;"  id="zxjcsl"></span>
					<!-- </a> -->
					</div>
				</div>
			</div>
			<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3">
				<div style="background:#6491ff;box-shadow: 0px -4px 18px #6491ff;line-height:102px;height: 102px;width: 100%;border-radius: 5px;overflow: hidden;">
					<div class="caseup-title"  id="anjianshouli" style="font-size: 16px;color:#fff;">
					<!-- <a href="http://localhost:8081/enforce/pages/case/caseList.html" class="layui-btn" style="line-height:102px;height: 102px;background-color:#6491ff;width:100%;padding:0;text-align:left;"> -->
						<img src="../../images/pagecase4.png" style="margin-left: 20px;margin-right: 15px;">
						<span style="margin-right: 10px;">案件受理</span>
						<span style="margin-right: 20px;font-size: 24px;"   id="ajslsl"></span>
					<!-- </a> -->
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-12" style="margin-top: 30px;">
			<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
				<div class="content-text">
					<div class="content-title">
						<div class="col-md-8">
						待办案件
						</div>
						<div class="col-md-4" id="more1" style="font-size: 12px;text-align: right;cursor:pointer;">
							<!--  <a  href="http://localhost:8081/enforce/pages/warn/warnList.html" lay-id="49" data-url="">  -->
							                
								<!-- 更多 -->
							 <!-- </a> -->
						</div>
						<div style="clear: both;"></div>
					</div>
					<div class="content-case col-md-12" id="contentCase">
					</div>
					<div style="clear: both;"></div>
				</div>
				<div style="clear: both;"></div>
				<div class="wrap" style="margin-top:10px;">
					<div class="fenye" id="fenyecase" data-type="case">
						<ul>
							<li class="first">首页</li>
							<li class="top" onclick="topclick($(this))">上一页</li>
							<li class="xifenye">
								<a class="xiye">1</a>/<a class="mo">1</a>
								<div class="xab" style="display:none">
									<ul class="uljia">
									</ul>
								</div>
							</li>
							<li class="down" onclick="downclick($(this))">下一页</a></li>
							<li class="last">末页</li>
						</ul>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
				<div class="content-text">
					<div class="content-title">
						<div class="col-md-8">
						预警列表
						</div>
						<div class="col-md-4"  id="more2" style="font-size: 12px;text-align: right;cursor:pointer;">
							<!-- <a  href="http://localhost:8081/enforce/pages/warn/warnList.html" lay-id="49" data-url="pages/warn/warnList.html">  -->
							 	更多 
							<!-- </a> --> 
						</div>
						<div style="clear: both;"></div>
					</div>
					<div class="content-case col-md-12" id="contentEarly">
					</div>
					<div style="clear: both;"></div>
				</div>
				<div style="clear: both;"></div>
			</div>
			<div class="col-xs-12 col-sm-4 col-md-4 col-lg-4">
				<div class="content-text">
					<div class="content-title">
						<div class="col-md-8">
						待办检查
						</div>
						<div class="col-md-4"  id="more3" style="font-size: 12px;text-align: right;cursor:pointer;">
						 <!-- <a  href="http://localhost:8081/enforce/pages/warn/warnList.html" lay-id="49" data-url="pages/warn/warnList.html"> -->
							<!-- 	更多 -->
						<!--  </a> --> 
						</div>
						<div style="clear: both;"></div>
					</div>
					<div class="content-case col-md-12" id="contentCheack">
					</div>
					<div style="clear: both;"></div>
				</div>
				<div style="clear: both;"></div>
				<div class="wrap" style="margin-top:10px;">
					<div class="fenye" id="fenyecheck" data-type="check">
						<ul>
							<li class="first">首页</li>
							<li class="top" onclick="topclick($(this))">上一页</li>
							<li class="xifenye">
								<a class="xiye">1</a>/<a class="mo">1</a>
								<div class="xab" style="display:none">
									<ul class="uljia">
									</ul>
								</div>
							</li>
							<li class="down" onclick="downclick($(this))">下一页</a></li>
							<li class="last">末页</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!--<div class="col-md-12">-->
			<!--<div class="box">-->
				<!--<div  style="height:38px;'" class="box-header with-border label-default">-->
					<!--<h4 class="box-title ">待办案件列表</h4>-->
				<!--</div>-->
				<!--<div class="box-body">-->
					<!--<table class="table table-bordered"  style="vertical-align: center;">-->
						<!--<thead>-->
							<!--<tr>-->
							<!--<th>序号</th>-->
							<!--<th>案件编号</th>-->
							<!--<th>处理任务</th>-->
							<!--<th>任务时间</th>-->
							<!--<th>查看流程图</th>-->
							<!--<th style="width: 80px">处理</th>-->
							<!--</tr>-->
						<!--</thead>-->
						<!--<tbody  id="taskDom">-->
						<!--</tbody>-->
					<!--</table>-->
				<!--</div>-->
			<!--</div>-->
		<!--</div>-->
	</div>
	

	
	<!-- <script src="layer/layer.js"></script> -->
	<script type="text/javascript" src="../../js/libs/jquery-2.1.1.min.js"></script>
   	<script type="text/javascript" src="../../layui/layui.js"></script>
   	<script type="text/javascript" src="../../js/main.js"></script>
   	<script type="text/javascript" src="../../js/pages.js"></script>
	<script type="text/javascript">
	
	
	 /* $('#richangjiancha').on('click', function(){
		 layer.open({
		        type: 2,
		        //skin: 'layui-layer-lan',
		        title: ['日常检查综合查询', 'background-color:#5b8bff;','color:#333 !important;'],
		        fix: false,
		        shadeClose: true,
		        maxmin: true,
		        area: ['90%', '90%'],
		        content: 'http://111.235.156.244/enforce/pages/checkDaily/search/searchCheckDaily.html',
		       
		    });
		});
 	 $('#zhuanxiangjiancha').on('click', function(){
		 layer.open({
		        type: 2,
		        //skin: 'layui-layer-lan',
		        title:['专项检查','background-color:#5b8bff;','color:#333 !important;'],
		        fix: false,
		        shadeClose: true,
		        maxmin: true,
		        area: ['90%', '90%'],
		        content: 'http://111.235.156.244/enforce/pages/special/checkQuery.html', 
		       
		    });
		});  
	$('#anjianshouli').on('click', function(){
		 layer.open({
		        type: 2,
		        //skin: 'layui-layer-lan',
		        title: ['案件受理','background-color:#5b8bff;','color:#fff !important;'],
		        fix: false,
		        shadeClose: true,
		        maxmin: true,
		        area: ['90%', '90%'],
		        content: 'http://111.235.156.244/enforce/pages/case/caseList.html', 
		       
		    });
		});  */
		
	/* 查看更多 */
	
	
	$('#more1').on('click', function(){
		 layer.open({
		        type: 2,
		        //skin: 'layui-layer-lan',
		        title: ['待办案件','background-color:#5b8bff;','color:#333 !important;'],
		        fix: false,
		        shadeClose: true,
		        maxmin: true,
		        area: ['90%', '90%'],
		        content: 'http://localhost:8081/enforce/pages/warn/Casetobehandled.html',
		       
		    });
		});
	
	$('#more2').on('click', function(){
		$("#dt-table").addClass('.test')
		 layer.open({
		        type: 2,
		        //skin: 'layui-layer-lan',
		        title: ['预警列表','background-color:#5b8bff;','color:#333 !important;'],
		        fix: false,
		        shadeClose: true,
		        maxmin: true,
		        area: ['90%', '90%'],
		        content: 'http://111.235.156.244/enforce/pages/warn/warnList1.html',
		       
		    });
		});
	$('#more3').on('click', function(){
		 layer.open({
		        type: 2,
		        //skin: 'layui-layer-lan',
		        title: ['待办检查','background-color:#5b8bff;','color:#333 !important;'],
		        fix: false,
		        shadeClose: true,
		        maxmin: true,
		        area: ['90%', '90%'],
		        content: 'http://localhost:8081/enforce/pages/warn/Backlogcheck.html',
		       
		    });
		});
		//获取分页总数
		/* layui.use(['layer'], function () {
        var layer = layui.layer;
    });
		function showDetailCase(caseId) {
        layer.open({
            type: 2,
            title: '案件详情页面',
            shade: [0.8, '#393D49'],
            shift: 2,
            maxmin: true,
            area: ['90%', '90%'],
            content: 'searchcheckDaily.html?caseId=' + caseId
        });
    } */
		/* <a href="http://localhost:8080/enforce/pages/checkDaily/search/searchcheckDaily.html" class="layui-btn"> */

        listcount($('#fenyecase'));
        listcount($('#fenyecheck'));
		function listcount(d){
            $.ajax({
                type : 'get',
                url : '/enforce/task/listCount/'+d.data('type'),
                contentType : "application/json; charset=utf-8",
                async : false,
                success : function(data) {
                    if (data.code == 0) {
                        d.children().children('li.xifenye').children('a.mo').html(Math.ceil(data.data/5));
                    }
                }
            });
		}
		
		//获取待办任务数量
		indexCount();
		function indexCount(){
            $.ajax({
                type : 'get',
                url : '/enforce/task/indexCount',
                contentType : "application/json; charset=utf-8",
                async : false,
                success : function(data) {
                    if (data.code == 0) {
                        $("#ajsbsl").html(data.data.ajsbsl+"件");
                        $("#rcjcsl").html(data.data.rcjcsl+"件");
                        $("#zxjcsl").html(data.data.zxjcsl+"件");
                        $("#ajslsl").html(data.data.ajslsl+"件");
                    }
                }
            });
		}

		//默认选择第一页
		getTaskList(0,'case');
        getTaskList(0,'check');
		
		/**
		 * 获取第page页的代办案件列表
		 */
		function getTaskList(page,type){
            if(type === 'case'){
                $('#contentCase').empty();
            }else if(type === 'check'){
                $('#contentCheack').empty();
            }
			$.ajax({
				type : 'get',
				url : '/enforce/task/list/'+page+'/' + type,
				contentType : "application/json; charset=utf-8",
				async : false,
				success : function(data) {
					if (data.code == 0) {
                        var tmpData = data.data;
						for (var i = 0; i < tmpData.length; i++) {
                            var caselist ='<div class="caselist col-md-12">'
								+'<div class="casetitle">'+tmpData[i].businessId+'</div>'
									+ '<div class="casestatus col-md-4">'+tmpData[i].taskName+'</div>' +
                                    '<div class="casedate col-md-6">'+tmpData[i].taskCreateTime+'</div>' +
                                    '<div class="casesee col-md-2"><a href="javascript:;" onclick="viewFlowImage(\'' + tmpData[i].taskId + '\')"><img src="../../images/hsee.png" style="margin-right: 5px;"></a>'
									+'<a  href="javascript:;" onclick="toProcessPage(\''+tmpData[i].taskName+'\', \''+tmpData[i].businessId+'\',\'case\')" ><img src="../../images/edit.png"></a>'
                                    +'</div>';
                            if(type === 'case'){
                                $('#contentCase').append(caselist);
							}else if(type === 'check'){
                                $('#contentCheack').append(caselist);
							}
						}
					}
				}
			});
		}
		// /**
		//  * 获取第page页的代办案件列表
		//  */
		/*  function getTaskList(page){
		 	$('#taskDom').empty();
             $('#contentCase').empty();
             $('#contentCheack').empty();
             // $('#contentEarly').empty();
		 	$.ajax({
		 		type : 'get',
		 		url : '/enforce/task/list/'+page,
		 		contentType : "application/json; charset=utf-8",
		 		async : false,
		 		success : function(data) {
		 			if (data.code == 0) {
		 				for (var i = 0; i < data.data.length; i++) {
		 					var tmpData = data.data;
		 					var taskDom = '';
		 					var caselist ='';
		 					var cheacklist ='';
		 					if (tmpData[i].procDefId.indexOf('case') == 0) {
		 					    //待办案件
                                 caselist +='<div class="caselist col-md-12">'
		 						+'<div class="casetitle">'+tmpData[i].businessId+'</div>'
		 							+ '<div class="casestatus col-md-4">'+tmpData[i].taskName+'</div>' +
                                     '<div class="casedate col-md-6">'+tmpData[i].taskCreateTime+'</div>' +
                                     '<div class="casesee col-md-2"><a href="javascript:;" onclick="viewFlowImage(\'' + tmpData[i].taskId + '\')"><img src="../../images/hsee.png" style="margin-right: 5px;"></a>'
		 							+'<a  href="javascript:;" onclick="toProcessPage(\''+tmpData[i].taskName+'\', \''+tmpData[i].businessId+'\',\'case\')" ><img src="../../images/edit.png"></a>'
                                     +'</div>';
		 						// 案件受理
		 						taskDom += '<tr style="vertical-align: center;">'
		 						+'<td>'+tmpData[i].taskId+"</td>"
		 						+'<td>'+tmpData[i].businessId+"</td>"
		 						+'<td>'+tmpData[i].taskName+"</td>"
		 						+'<td>'+tmpData[i].taskCreateTime+"</td>"
		 						+'<td><a href="javascript:;" onclick="viewFlowImage(\'' + tmpData[i].taskId + '\')">查看</a></td>'
		 						+'<td>'
		 						+'<a  href="javascript:;" onclick="toProcessPage(\''+tmpData[i].taskName+'\', \''+tmpData[i].businessId+'\',\'case\')" >处理</a>'
		 						+'</td>';
		 					} else if(tmpData[i].procDefId.indexOf('proCheck') == 0) {
                                 cheacklist +='<div class="caselist col-md-12">'
                                     +'<div class="casetitle">'+tmpData[i].businessId+'</div>'
                                     + '<div class="casestatus col-md-4">'+tmpData[i].taskName+'</div>' +
                                     '<div class="casedate col-md-6">'+tmpData[i].taskCreateTime+'</div>' +
                                     '<div class="casesee col-md-2"><a href="javascript:;" onclick="viewFlowImage(\'' + tmpData[i].taskId + '\')"><img src="../../images/hsee.png" style="margin-right: 5px;"></a>'
                                     +'<a  href="javascript:;" onclick="toProcessPage(\''+tmpData[i].taskName+'\', \''+tmpData[i].businessId+'\',\'case\')" ><img src="../../images/edit.png"></a>'
                                     +'</div>';
		 						// 专项检查
		 						taskDom += '<tr style="vertical-align: center;">'
		 						+'<td>'+tmpData[i].taskId+"</td>"
		 						+'<td>'+tmpData[i].businessId+"</td>"
		 						+'<td>'+tmpData[i].taskName+"</td>"
		 						+'<td>'+tmpData[i].taskCreateTime+"</td>"
		 						+'<td><a href="javascript:;" onclick="viewFlowImage(\'' + tmpData[i].taskId + '\')">查看</a></td>'
		 						+'<td>'
		 						+'<a  href="javascript:;" onclick="toProcessPage(\''+tmpData[i].taskName+'\', \''+tmpData[i].businessId+'\',\'check\')" >处理</a>'
		 						+'</td>';
		 					}else if(tmpData[i].procDefId.indexOf('dayCheck') == 0) {
                                 cheacklist +='<div class="caselist col-md-12">'
                                     +'<div class="casetitle">'+tmpData[i].businessId+'</div>'
                                     + '<div class="casestatus col-md-4">'+tmpData[i].taskName+'</div>' +
                                     '<div class="casedate col-md-6">'+tmpData[i].taskCreateTime+'</div>' +
                                     '<div class="casesee col-md-2"><a href="javascript:;" onclick="viewFlowImage(\'' + tmpData[i].taskId + '\')"><img src="../../images/hsee.png" style="margin-right: 5px;"></a>'
                                     +'<a  href="javascript:;" onclick="toProcessPage(\''+tmpData[i].taskName+'\', \''+tmpData[i].businessId+'\',\'case\')" ><img src="../../images/edit.png"></a>'
                                     +'</div>';
		 						// 日常检查
		 						taskDom += '<tr style="vertical-align: center;">'
		 						+'<td>'+tmpData[i].taskId+"</td>"
		 						+'<td>'+tmpData[i].businessId+"</td>"
		 						+'<td>'+tmpData[i].taskName+"</td>"
		 						+'<td>'+tmpData[i].taskCreateTime+"</td>"
		 						+'<td><a href="javascript:;" onclick="viewFlowImage(\'' + tmpData[i].taskId + '\')">查看</a></td>'
		 						+'<td>'
		 						+'<a  href="javascript:;" onclick="toProcessPage(\''+tmpData[i].taskName+'\', \''+tmpData[i].businessId+'\',\'dcheck\')" >处理</a>'
		 						+'</td>';
		 					}else{
		 						taskDom += '<p>其他单据</p>';
		 					}
		 					$('#taskDom').append(taskDom);
                             $('#contentCase').append(caselist);
                             $('#contentCheack').append(cheacklist);
		 				}
		 			}
		 		}
		 	});
		
		 } */

        huoqushuliang();

        //获取当前登陆用户个人信息
        var  pname ='';
        $.ajax({
            type : 'get',
            url : '/enforce/users/current',
            async : false,
            success : function(data) {
                pname=data;
            }
        });
        //获取预警总数与预警内容
        function huoqushuliang() {
            $.ajax({
                type: "post",
                dataType: "json",
                url: "/enforce/yuj/Bt",
                success: function (data) {
                    $.ajax({
                        type: "get",
                        dataType: "json",
                        url: "/enforce/yuj/Btlist",
                        success: function (data) {
                            for (var i = 0; i < data.data.length; i++) {
                                var tmpData = data.data;
                                var earlylist = '';
                                earlylist += "<div class='caselist col-md-12' style='cursor:pointer;' onclick=showDetailYuj(this) data-id='"+data.data[i].id+"'>"
                                    + '<div class="earlytitle">' + tmpData[i].content + '</div>'
                                    + '<div class="earlyname col-md-6">发送人:' + tmpData[i].createName + '</div>' +
                                    '<div class="earlypname col-md-6">接收人:' + pname.nickname + '</div>'; //显示当前登陆人姓名
                                $('#contentEarly').append(earlylist);
                            }
                        }
                    })
                }
            })
        }

		function toProcessPage(taskName, businessId,taskType) {
			parent.getMethodValue(taskName, businessId,taskType);
		}
		
		function viewFlowImage(taskId){
			parent.layer.open({
				type: 2,
		        title:['查看流程图','background-color:#5b8bff','color:#333  !important;'],
		        shade: [0],
		        fix: false,
		        area: ['95%', '82%'],
		        scrollbar : false,
		        shift: 2,
		        content: 'pages/index/flowImage.html?taskId=' + taskId
		    });
		}
        //预警详细页面
        function showDetailYuj(obj) {
            var yujId = $(obj).attr("data-id");
            parent.layer.open({
                type: 2,
                title: ['预警详情页面','background-color:#5b8bff'],
                shade: [0],
                area: ['73%', '70%'],
                shift: 2,
                content: 'pages/warn/warnDetailInfo.html?yujId=' + yujId
            });
        }

        $('.content-case').height($('body').height() - 280);
        
        /* 头部四个模块的跳转 */
       /*  $('.richang').on('click',function(){
			location.href="filingList.html";
		}); */
	</script>
</body>
</html>